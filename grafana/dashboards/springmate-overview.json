{
  "title": "SpringMate â€“ Production Overview",
  "time": { "from": "now-15m", "to": "now" },
  "schemaVersion": 39,
  "panels": [
    {
      "type": "timeseries",
      "title": "Incoming Traffic (RPS)",
      "targets": [
        {
          "expr": "sum(rate(http_server_requests_seconds_count{app=\"springmate\"}[1m]))",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 0, "y": 0, "w": 8, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Error Rate (%)",
      "targets": [
        {
          "expr": "(sum(rate(http_server_requests_seconds_count{app=\"springmate\",status=~\"5..\"}[1m])) / sum(rate(http_server_requests_seconds_count{app=\"springmate\"}[1m]))) * 100",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 8, "y": 0, "w": 8, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Request Latency (P95 / P99)",
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum by (le) (rate(http_server_requests_seconds_bucket{app=\"springmate\"}[5m])))",
          "refId": "A"
        },
        {
          "expr": "histogram_quantile(0.99, sum by (le) (rate(http_server_requests_seconds_bucket{app=\"springmate\"}[5m])))",
          "refId": "B"
        }
      ],
      "gridPos": { "x": 16, "y": 0, "w": 8, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "DB Pool Usage",
      "targets": [
        {
          "expr": "hikaricp_connections_active{app=\"springmate\"}",
          "refId": "A"
        },
        {
          "expr": "hikaricp_connections_max{app=\"springmate\"}",
          "refId": "B"
        }
      ],
      "gridPos": { "x": 0, "y": 8, "w": 12, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "CPU Usage (%)",
      "targets": [
        {
          "expr": "process_cpu_usage{app=\"springmate\"} * 100",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 12, "y": 8, "w": 6, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Heap Used (%)",
      "targets": [
        {
          "expr": "(jvm_memory_used_bytes{app=\"springmate\",area=\"heap\"} / jvm_memory_max_bytes{app=\"springmate\",area=\"heap\"}) * 100",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 18, "y": 8, "w": 6, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Live Threads",
      "targets": [
        {
          "expr": "jvm_threads_live{app=\"springmate\"}",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 0, "y": 16, "w": 8, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Top Slow Endpoints",
      "targets": [
        {
          "expr": "topk(5, sum by (uri) (rate(http_server_requests_seconds_sum{app=\"springmate\"}[5m])))",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 8, "y": 16, "w": 8, "h": 8 }
    },
    {
      "type": "timeseries",
      "title": "Top Error Endpoints",
      "targets": [
        {
          "expr": "topk(5, sum by (uri) (rate(http_server_requests_seconds_count{app=\"springmate\",status=~\"5..\"}[5m])))",
          "refId": "A"
        }
      ],
      "gridPos": { "x": 16, "y": 16, "w": 8, "h": 8 }
    }
  ]
}
